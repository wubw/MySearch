
[Freshness work items (microsoft.com)](https://loop.microsoft.com/p/eyJ1IjoiaHR0cHM6Ly9taWNyb3NvZnQuc2hhcmVwb2ludC5jb20vc2l0ZXMvNzhiOTJmY2EtOTI5OS00MWQwLWIxNGUtZWNkMDM0NDEzZjM5P25hdj1jejBsTWtaemFYUmxjeVV5UmpjNFlqa3labU5oTFRreU9Ua3ROREZrTUMxaU1UUmxMV1ZqWkRBek5EUXhNMll6T1Naa1BXSWxNakZITUVKUU1HWnVTMDlGY1VNM2JHbDZjVGN5WkZsdFVHVnBXV2R1UzJwb1QyNDJVMDlpYzB4bldEZFBZMVpUUnpoeUxVUlFVVXhQUzFwTlFVeEVlblZXSm1ZOU1ERk5ORUpaV0VsVFREVTBUVWxEVGpjMFIxcEhNMEpSVmtwTVNVUXpTMGRLVUNaalBTVXlSaVpoUFV4dmIzQkJjSEFtY0QwbE5EQm1iSFZwWkhnbE1rWnNiMjl3TFhCaFoyVXRZMjl1ZEdGcGJtVnlKbmc5SlRkQ0pUSXlkeVV5TWlVelFTVXlNbFF3VWxSVlNIaDBZVmRPZVdJelRuWmFibEYxWXpKb2FHTnRWbmRpTW14MVpFTTFhbUl5TVRoWmFVWklUVVZLVVUxSFduVlRNRGxHWTFWTk0ySkhiRFpqVkdONVdrWnNkRlZIVm5CWFYyUjFVekp3YjFReU5ESlZNRGxwWXpCNGJsZEVaRkJaTVZwVVVucG9lVXhWVWxGVlZYaFFVekZ3VGxGVmVFVmxibFpYWmtSQmVGUlVVa05YVm1oS1ZWWlZNVk5WZUU5VFZYY3lUV3hzVjFKRVNUTk9Wa0V4Vld0T1UxVlVWbHBSVmxrbE0wUWxNaklsTWtNbE1qSnBKVEl5SlROQkpUSXlZelEzTkdWbVlUSXRZalJqTXkwMFptRTBMV0pqT1RFdE1tTmpOMlF6WkRaaFlqVXlKVEl5SlRkRSJ9?ct=1706091965111&or=Teams-HL)

[E2EFreshness_Review_Jan16_2024.pptx](https://microsoft.sharepoint-df.com/:p:/s/M365CoreSearchExtensibilityTeam/EcmsF1b7Y9JPjlHJXRx9df0BgOlxej54yO4mmZ7En2D7Bw?e=kkpqkr)

Alignment with [[CPS]] team
- Katie Thompson
- Shravya Thandra
- Suny Tyagi
- Neetha Tuluri

![[Pasted image 20230921105718.png]]

# Alerts

insight on how many customers are impacted

# Dashboard

[Freshness | Jarvis (microsoftgeneva.com)](https://portal.microsoftgeneva.com/dashboard/O365_SSMS/ASC/Freshness?overrides=[%7B%22query%22:%22//*[id%3D%27ProcessorName%27]%22,%22key%22:%22value%22,%22replacement%22:%22TenantSearchAscSharedItemProcessorP3%22%7D,%7B%22query%22:%22//*[id%3D%27Environment%27]%22,%22key%22:%22value%22,%22replacement%22:%22WW%22%7D]%20 "https://portal.microsoftgeneva.com/dashboard/o365_ssms/asc/freshness?overrides=[%7b%22query%22:%22//*[id%3d%27processorname%27]%22,%22key%22:%22value%22,%22replacement%22:%22tenantsearchascshareditemprocessorp3%22%7d,%7b%22query%22:%22//*[id%3d%27environment%27]%22,%22key%22:%22value%22,%22replacement%22:%22ww%22%7d]%20")

[Tenant-Freshness | Jarvis (microsoftgeneva.com)](https://portal.microsoftgeneva.com/dashboard/O365_SSMS/ASC/Freshness/Tenant-Freshness?overrides=[%7B%22query%22:%22//*[id%3D%27Forest%27]%22,%22key%22:%22value%22,%22replacement%22:%22eurprd01%22%7D,%7B%22query%22:%22//*[id%3D%27ProcessorName%27]%22,%22key%22:%22value%22,%22replacement%22:%22TenantSearchAscSharedItemProcessorP3%22%7D,%7B%22query%22:%22//*[id%3D%27TenantId%27]%22,%22key%22:%22value%22,%22replacement%22:%2205e91730-bfa3-405b-b814-bd9b0ee89317%22%7D]%20 "https://portal.microsoftgeneva.com/dashboard/o365_ssms/asc/freshness/tenant-freshness?overrides=[%7b%22query%22:%22//*[id%3d%27forest%27]%22,%22key%22:%22value%22,%22replacement%22:%22eurprd01%22%7d,%7b%22query%22:%22//*[id%3d%27processorname%27]%22,%22key%22:%22value%22,%22replacement%22:%22tenantsearchascshareditemprocessorp3%22%7d,%7b%22query%22:%22//*[id%3d%27tenantid%27]%22,%22key%22:%22value%22,%22replacement%22:%2205e91730-bfa3-405b-b814-bd9b0ee89317%22%7d]%20")

[[Christoffer Rosen]] main point is the [freshness dashboard](https://portal.microsoftgeneva.com/dashboard/O365_SSMS/ASC/Freshness?overrides=%5B%7B%22query%22:%22//*%5Bid%3D%27ProcessorName%27%5D%22,%22key%22:%22value%22,%22replacement%22:%22TenantSearchAscSharedItemProcessorP3%22%7D,%7B%22query%22:%22//*%5Bid%3D%27Environment%27%5D%22,%22key%22:%22value%22,%22replacement%22:%22WW%22%7D%5D%20 "https://portal.microsoftgeneva.com/dashboard/o365_ssms/asc/freshness?overrides=%5b%7b%22query%22:%22//*%5bid%3d%27processorname%27%5d%22,%22key%22:%22value%22,%22replacement%22:%22tenantsearchascshareditemprocessorp3%22%7d,%7b%22query%22:%22//*%5bid%3d%27environment%27%5d%22,%22key%22:%22value%22,%22replacement%22:%22ww%22%7d%5d%20") contains good data. We need to study and reuse same data for alerts.
- corelate alerts to avoid too many
- detect repeatable pattern even most freshness alerts will auto-mitigate but not mean the problem disappear
- once we figure out pattern, we can study further maybe some customers have special use scenarios
- include primary/EBA alerts
- alerts need to be actionable
- alerts scope - whether forest or tenant we need to think about it the goal is to make alerts actionable and provide insights
- we can also consider sending daily alerts, list tenants does not meet the freshness bar, how long some kind of overview

[E2EFreshnessDashboard - Power BI](https://msit.powerbi.com/groups/eef0ae67-cfdd-4c9c-a635-64c62c65b2a9/reports/c587b9de-38fc-4ab8-acd7-2db52cf4a452/ReportSectione1036899700ec448b019?experience=power-bi "https://msit.powerbi.com/groups/eef0ae67-cfdd-4c9c-a635-64c62c65b2a9/reports/c587b9de-38fc-4ab8-acd7-2db52cf4a452/reportsectione1036899700ec448b019?experience=power-bi")

# Documents

[Freshness kusto link](https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fdataexplorer.azure.com%2Fclusters%2Fsubstratesearch.westus%2Fdatabases%2FSubstrateSearchExceptionEvent&data=05%7C01%7Cbinweiwu%40microsoft.com%7C00696c840e5049f3d04708dbba0c6af6%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C638308334749750935%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=55cJxQMkXSzwjPTIKZHpQuK7yPjuRjrzvqZiOSLUQx8%3D&reserved=0)

https://o365exchange.visualstudio.com/O365%20Core/_wiki/wikis/O365%20Core.wiki/48355/Freshness-Hot-Shards-investigation

[Freshness Knowledge Transfer.docx](https://microsoftapc-my.sharepoint.com/:w:/g/personal/liulucy_microsoft_com/EbDOFy3EMqlAoJDZmuS11IYBVUZGTp-3_fb3-C7f7IoyVQ?e=6wGk25)

# Christiana talk

[EstablishFreshnessVTeam.pptx](https://microsoft-my.sharepoint-df.com/:p:/p/chrosen/EVOD6JBJVxFJgPk2ZqaClK0BuKhFfOiX-qheJ1uvFtUwhA?e=MJcSnB)

Latency breakdown  
MDM dashboard only shows the event gate latency

hot shard problem, event age is high

Primary latency is not captured

E2E dashboard  
s500 tenants  
P95 for event age: concept from Griffin

alerts are not actionable  
aggregate by forest

MSR data, difficult to get the data  
Starts from EBA log

# [[SCI]]
![[Pasted image 20231128134146.png]]

Freshness calculation is not accurate

# Freshness KT
[[Freshness]]
Prime: site denormalization, delete site. other responsibility?
SPOONS trigger Prime

Freshness only covers traffic from CPS
Whether we can use sampling to speed up

LastModifiedTimeBySource -> set means from CPS

fast dispatch? When it happens?

[Freshness KT.pptx](https://microsoftapc-my.sharepoint.com/:p:/g/personal/yujiawang_microsoft_com/ERoNKt7Dqd5BnR0lZtU7NlQBg4tpuomaivwPQIIkaTfnsg?e=aIbdHd)

[Freshness Knowledge Transfer.docx](https://microsoftapc-my.sharepoint.com/:w:/g/personal/liulucy_microsoft_com/EbDOFy3EMqlAoJDZmuS11IYBVUZGTp-3_fb3-C7f7IoyVQ?e=uVi9WC)

Site move
Instance id is changed: one region to another region
Challenge, does not see the old instance id in processor

# Freshness bi-weekly meeting
Christina Stanley, do we have an incident for the forests that have regressed in delivery latency for WW? +1 as these look to be small forests that have regressed (korp)
yes, I will be looking at the transport logs for some of these forests that have high latency and raise an incident to the transport team.
Binwei Wu fyi this is where the current freshness alerts are lagging, since they don't consider delivery latency so we have to manually raise them today.
[Task 4141134](https://o365exchange.visualstudio.com/O365%20Core/_workitems/edit/4141134): Freshness alert takes delivery latency into consideration

[E2EFreshness_Review_Nov14.pptx](https://microsoft.sharepoint-df.com/:p:/s/M365CoreSearchExtensibilityTeam/ES5fytWLaHBKtlJtO9I4NOEBHt-DARskmYGHGEl5DjGNRA?e=CFFHdS)
